{"ts":1362265043203,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"<?php\nnamespace Application\\Model;\n\nuse Zend\\Db\\TableGateway\\TableGateway;\n\nclass UserTable\n{\n    protected $tableGateway;\n\n    public function __construct(TableGateway $tableGateway)\n    {\n        $this->tableGateway = $tableGateway;\n    }\n\n    public function fetchAll()\n    {\n        $resultSet = $this->tableGateway->select();\n        return $resultSet;\n    }\n\n    public function getUser($id)\n    {\n        $id  = (int) $id;\n        $rowset = $this->tableGateway->select(array('id' => $id));\n        $row = $rowset->current();\n        if (!$row) {\n            throw new \\Exception(\"Could not find row $id\");\n        }\n        return $row;\n    }\n\n    public function saveUser(User $user)\n    {\n        $data = array(\n            'email' => $user->email,\n            'password'  => $user->password,\n        );\n\n        $id = (int)$user->id;\n        if ($id == 0) {\n            $this->tableGateway->insert($data);\n        } else {\n            if ($this->getUser($id)) {\n                $this->tableGateway->update($data, array('id' => $id));\n            } else {\n                throw new \\Exception('Form id does not exist');\n            }\n        }\n    }\n\n    public function deleteUser($id)\n    {\n        $this->tableGateway->delete(array('id' => $id));\n    }\n}"]],"start1":0,"start2":0,"length1":0,"length2":1266}]],"length":1266}
